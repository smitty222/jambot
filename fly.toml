# fly.toml for jamflowbot-allen-v2

app = "jamflowbot-allen-v2"
primary_region = "atl"

[build]
  # (add any build-specific config here, or leave empty for defaults)

[processes]
  app = "npm start"

[http_service]
  internal_port        = 3000
  force_https          = true
  auto_start_machines  = true
  auto_stop_machines   = "off"    # ← never autostop
  min_machines_running = 1        # ← always keep 1 instance up
  processes            = ["app"]

  # Optional: if your /health endpoint is quick, re-enable this:
  [[http_service.checks]]
    interval = "30s"
    timeout  = "5s"
    method   = "get"
    path     = "/health"
    protocol = "http"

[[vm]]
  memory   = "1gb"
  cpu_kind = "shared"
  cpus     = 1

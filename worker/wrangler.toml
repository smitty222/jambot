name = "jamflow-site-api"
main = "worker.js"
compatibility_date = "2024-11-12"
compatibility_flags = ["nodejs_compat"]
workers_dev = true

# ── PROD (default) ─────────────────────────────────────────
[[kv_namespaces]]
binding   = "SITEDATA"
id        = "16bbdd5af7a4490883296e840943352c"
preview_id = "ce75ac7de9464941b44a827cf7c92be6"

[vars]
# Keep permissive if you’ll hit from multiple prod origins; otherwise
# set to your exact Pages domain once stable.
PUBLIC_ORIGIN = "*"

[env.production]
name = "jamflow-site-api"
# If you want to lock CORS down later:
# [env.production.vars]
# PUBLIC_ORIGIN = "https://jambot-e72.pages.dev"

# ── DEV ────────────────────────────────────────────────────
[env.dev]
name = "jamflow-site-api-dev"

[[env.dev.kv_namespaces]]
binding = "SITEDATA"
id      = "86bc4cae2074474eaf9792037d91a97b"

[env.dev.vars]
# Use "*" in dev so **preview** URLs like 3884a1f6.jambot-e72.pages.dev work
# without changing this every time.
PUBLIC_ORIGIN = "*"
